### **1. 추천 적합도- 추천 품질 정확도 (Recommendation Alignment Score)**
--코사인유사도를 구하고 구하는 지표

**정의**:
GPT가 생성한 검색 쿼리와 Spotify 실제 검색 결과가 의도와 얼마나 의미적으로 일치하는가.

**측정 방법**:
- 코사인 유사도 평가 파이프라인에서 산출되는 mean_sim, p@K, hallucinated 지표 기반
- KPI는 보통 “평균 유사도(Mean Similarity)” 또는 "일치율(1 - 환각율)”로 표현

**지표 계산식 예시**:
Alignment Score = 1−Hallucination Rate

**목표**:
- 초기 baseline: 0.12 (현재 환각율 88%)
- 1차 목표: 환각율 60% 이하
- 최종 목표: 환각율 30% 이하 (Alignment Score ≥ 0.7)

**의미**:
“GPT가 만든 쿼리가 실제 환경·목표에 맞는 음악을 얼마나 잘 유도하느냐”를 나타내는 핵심 품질지표.

---

### **2. 추천 적합도- 사용자 만족도 (User Rating)**

A/B 테스트 또는 피드백 로그 기반 추천 결과 선호도 비율

**측정 방법**:
좋아요/싫어요 클릭율, skip율, 재생 지속률 등

---

### **2. 규칙 커버리지- 규칙 일관성 점수 (Rule Consistency Rate)** 
--규칙이 있어야 가능한 지표

**정의**:
GPT 출력이 Taxonomy 규칙(Location × Goal × Decibel)에 부합하는 비율.
-> 규칙엔진이 설정한 기대 속성(BPM, Mood, Energy, Genre 등)을 GPT가 얼마나 잘 반영했는지.

**측정 방법**:
- 규칙엔진에서 정의된 기대속성 vs GPT 출력 키워드의 문맥 비교 (Rule Validation 로직)
- 예: gym × active인데 “sleep ambient”가 들어가면 불일치

**지표 계산식 예시**:
Rule Consistency= 일치한 쿼리 수 / 전체 쿼리 수
	​

**목표**:
1차 목표: 80% 이상
장기 목표: 90% 이상

**의미**:
“GPT가 규칙엔진을 따르고 있는가?” — 즉, 시스템 일관성 확보의 핵심 지표.

---

### **3. 엣지케이스 처리율(KPI: Edge-case Handling)**

**목표**: GPT 또는 Spotify Search가 비정상 입력(모호, 중복, 비표준 등)을 받았을 때 정상적으로 fallback·보정하는 비율

| 항목                             | 설명                               | 계산 방식 (예시)                         |
| ------------------------------ | -------------------------------- | ---------------------------------- |
| **엣지케이스 감지율 (Detection Rate)** | 예외 입력을 규칙엔진이 탐지한 비율              | (탐지된 예외 샘플 / 전체 예외 샘플) × 100       |
| **복원율 (Recovery Rate)**        | 감지된 예외 중 정상 추천으로 전환된 비율          | (정상 추천으로 복원된 샘플 / 감지된 예외 샘플) × 100 |
| **실패율 (Failure Rate)**         | GPT/Spotify 응답 실패, null 응답 등의 비율 | (실패 응답 수 / 전체 요청 수) × 100          |
